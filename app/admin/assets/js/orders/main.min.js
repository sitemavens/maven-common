/**
 * @license RequireJS text 2.0.5+ Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("models/order",["dateJS","localization"],function(e,t){var n=Backbone.Model.extend({action:"orderEntryPoint",defaults:{orderDate:Date.parse("today").toString("yyyy-MM-dd")},initialize:function(){},validation:{shippingCarrier:"validateShippingFields",shippingTrackingCode:"validateShippingFields",shippingTrackingUrl:{pattern:"url",required:!1}},validateShippingFields:function(e,n,r){if(this.get("validateShipping")&&e.length===0)return t.get("required")}});return n}),define("collections/orders",["models/order","pageable"],function(e){var t=Backbone.MavenCollection.extend({model:e,action:"orderEntryPoint",initialize:function(){},state:{sortKey:"orderDate",order:1}});return t}),define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a=typeof location!="undefined"&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||undefined),h=[],p=e.config&&e.config()||{};t={version:"2.0.5+",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(h.hasOwnProperty(n)){var s=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(p.env==="node"||!p.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(p.env==="xhr"||!p.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(p.env==="rhino"||!p.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(p.env==="xpconnect"||!p.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}};return t}),define("text!templates/orders.html",[],function(){return'<!-- // orders/app/templates/orders.html -->\n<div id="ordersStats" class="row-fluid span6 stats-overview-cont">	\n</div>\n<div id="ordersStatsTotal" class="row-fluid span6 stats-overview-cont">	\n</div>\n<div class="row-fluid">\n	<div class="widget">\n		<div class="widget-title">\n			<h4><i class="icon-reorder"></i>\n				{{ titleOrders}}</h4>\n			<span class="tools">\n				<a href="javascript:void(0)" class="filter active"><i class="icon-cog"></i></a>\n				<!--<button class="btn btn-success" id="add"><i class="icon-plus"></i>&nbsp;{{ buttonAddOrder }}</button>-->\n			</span>\n		</div>\n		<div class="filter-wrap">\n			<span class="input-append">\n				<input id="fieldNumber" name="fieldNumber" type="text" class="input-small" placeholder="{{columnNumber}}" style="margin: 0 auto;"  />\n				<span id="searchNumber" class="btn"><i class="icon-search"></i></span>\n			</span>&nbsp;\n			<select id="searchStatus" class="input-large">\n			</select>&nbsp;\n			<button class="btn" id="form-date-range">\n				<i class="icon-calendar"></i>\n				&nbsp;<span></span> \n				<b class="caret"></b>\n			</button>&nbsp;\n			<button class="btn" id="btnLastOrders">{{ allOrders }}</button>\n		</div>\n		<div class="widget-body">\n			<div id="orders"></div>\n		</div>\n	</div>\n</div>\n\n\n'}),define("text!templates/order-row.html",[],function(){return'<td><img id="statusImage" /></td>\n<td id="number"></td>\n<td id="customer"></td>\n<td id="orderDate"></td>\n<td id="total"></td>\n<td>\n	<button class="btn btn-primary btn-mini" id="edit"><i class="icon-edit"></i>&nbsp;{{ buttonEditOrder }}</button>\n	<a id="confirmDeleteButton" class="btn btn-mini" role="button"><i class="icon-trash"></i>&nbsp;{{ buttonDeleteOrder }}</a>\n	<div aria-hidden="true" aria-labelledby="myModalLabel3" role="dialog" \n	     tabindex="-1" class="modal fade" id="confirmDeleteModal" style="display: none;">\n		<div class="modal-header">\n			<button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>\n			<h3 id="myModalLabel3">{{ deleteConfirmationMessage }}</h3>\n		</div>\n		<div class="modal-body">\n			<p><strong>{{ columnNumber }}:&nbsp;</strong><span id="number"></span></p>\n			<p><strong>{{ columnOrderDate }}:&nbsp;</strong><span id="orderDate"></span></p>\n			<p><strong>{{ columnTotal }}:&nbsp;</strong><span id="total"></span></p>\n			<div class="alert alert-block alert-error fade in">\n				<!--<button data-dismiss="alert" class="close" type="button">×</button>-->\n				<h4 class="alert-heading">{{orderDeleteWarning}}</h4>\n				<p>\n					{{orderDeleteWarningMessage}}\n				</p>\n			</div>\n		</div>\n		<div class="modal-footer">\n			<button aria-hidden="true" data-dismiss="modal" class="btn">{{ buttonCloseModal }}</button>\n			<button class="btn btn-danger" id="performDelete" data-dismiss="modal">{{ buttonConfirmDelete }}</button>\n		</div>\n	</div>\n</td>\n'}),define("views/order-row",["jquery","localization","notifications","text!templates/order-row.html"],function(e,t,n,r){var i=Backbone.View.extend({tagName:"tr",template:_.template(r),editRoute:_.template("order/edit/{{ id }}"),events:{"click button[id=edit]":"editOrder","click a[id=confirmDeleteButton]":"showDelete","click button[id=performDelete]":"deleteOrder"},initialize:function(){_.bindAll(this,"render","editOrder","showDelete","deleteOrder"),this.model.bind("change",this.render)},bindings:{"#number":"number","#orderDate":{observe:"orderDate",onGet:function(e,t){var n=Date.parse(e);return n.toString("MMMM d, yyyy")}},"#total":"total","#customer":{observe:"contact",onGet:function(e,t){if(e){var n=e.salutation?e.salutation+" ":"",r=e.lastName?e.lastName+", ":"",i=e.firstName?e.firstName:"";return n+r+i}return""}},"#statusImage":{attributes:[{name:"src",observe:"status",onGet:function(e,t){return e?e.imageUrl:""}},{name:"alt",observe:"status",onGet:function(e,n){return e?e.name:t.get("unknownStatus")}}]}},render:function(){return e(this.el).append(this.template(t.toJSON())),this.stickit(),e(this.el)},showDelete:function(){this.$("#confirmDeleteModal").modal()},destroy_view:function(){e(this.el).toggleClass("error");var t=this;e(this.el).fadeOut("slow",function(){t.undelegateEvents(),t.$el.removeData().unbind(),t.remove(),Backbone.View.prototype.remove.call(t)})},editOrder:function(){Backbone.history.navigate(this.editRoute(this.model.toJSON()),{trigger:!0})},deleteOrder:function(){var e=this;this.model.destroy({success:function(){n.showDelete(t.get("OrderDeleted")),e.destroy_view()}})}});return i}),define("text!templates/empty.html",[],function(){return'<img class="img-no-orders" />\n<span>{{ message }}</span>\n'}),define("models/order-status",[],function(){var e=Backbone.Model.extend({defaults:{},initialize:function(){},validation:{}});return e}),define("collections/order-statuses",["models/order-status"],function(e){var t=Backbone.Collection.extend({model:e,initialize:function(){}});return t}),define("models/order-stat",[],function(){var e=Backbone.Model.extend({defaults:{name:"",value:""},initialize:function(){}});return e}),define("text!templates/order-stat.html",[],function(){return'<div class="stats-overview block clearfix">\n	<div class="details">\n		<div class="numbers" id="orderCount">{{value}}</div>\n		<div class="title">{{name}}</div>\n	</div>\n</div>\n\n'}),define("views/order-stat",["jquery","models/order-stat","text!templates/order-stat.html"],function(e,t,n){var r=Backbone.View.extend({template:_.template(n),model:t,render:function(){return this.$el.html(this.template(this.model.toJSON())),e(this.el).attr("data-desktop","span2").attr("data-tablet","span4").addClass("span2 responsive"),this}});return r}),define("views/order-stats",["views/order-stat"],function(e){var t=Backbone.View.extend({initialize:function(e){this.el=e.el,this.collection.on("all",this.render,this),this.render()},render:function(){return this.$el.empty(),this.collection.each(function(t){this.$el.append((new e({model:t})).render().el)},this),this}});return t}),define("collections/order-stats",["models/order-stat","localization","collections/orders"],function(e,t,n){var r=Backbone.Collection.extend({model:e,initialize:function(e,t){this.collection=t.collection,this.collection.on("all",this.recompute,this),this.recompute()},recompute:function(){var e=this.collection.reduce(function(e,t){return t.get("statusId")===CompletedStatusId?e+parseFloat(t.get("total")):e+0},0),n=this.collection.length,r=this.collection.filter(function(e){return e.get("statusId")===CompletedStatusId}).length;this.reset(_.map(["count","countCompleted","sum","avg"],function(i){switch(i){case"count":return{name:t.get("orders"),value:n};case"countCompleted":return{name:t.get("completedOrders"),value:r};case"sum":return{name:t.get("sales"),value:"$&nbsp;"+e.toFixed(2)};case"avg":return e>0||r>0?{name:t.get("averageSale"),value:"$&nbsp;"+(e/r).toFixed(2)}:{name:t.get("averageSale"),value:"$&nbsp;"+0..toFixed(2)}}},this))}});return r}),define("models/order-total",[],function(){var e=Backbone.Model.extend({action:"orderStatsEntryPoint",defaults:{count:0,total:0},initialize:function(){}});return e}),define("text!templates/order-total.html",[],function(){return'<div class="span2 responsive" data-desktop="span2" data-tablet="span4">\n	<div class="stats-overview block clearfix">\n		<div class="details">\n			<div class="numbers" id="count"></div>\n			<div class="title">{{totalCount}}</div>\n		</div>\n	</div>\n</div>\n<div class="span2 responsive" data-desktop="span2" data-tablet="span4">\n	<div class="stats-overview block clearfix">\n		<div class="details">\n			<div class="numbers" id="completedCount"></div>\n			<div class="title">{{totalCompletedCount}}</div>\n		</div>\n	</div>\n</div>\n<div class="span2 responsive" data-desktop="span2" data-tablet="span4">\n	<div class="stats-overview block clearfix">\n		<div class="details">\n			<div class="numbers" id="total"></div>\n			<div class="title">{{totalSales}}</div>\n		</div>\n	</div>\n</div>'}),define("views/order-total",["jquery","localization","models/order-total","text!templates/order-total.html"],function(e,t,n,r){var i=Backbone.View.extend({template:_.template(r),model:n,initialize:function(){this.model=new n({id:1});var e=this;this.model.fetch({success:function(){e.render()}})},bindings:{"#total":{observe:"total",updateMethod:"html",onGet:function(e){return"$&nbsp;"+e.toFixed(2)}},"#count":"count","#completedCount":"completedCount"},render:function(){return this.$el.html(this.template(t.toJSON())),this.stickit(),this}});return i}),define("views/orders",["jquery","dataTables","spinner","localization","text!templates/orders.html","collections/orders","views/order-row","text!templates/empty.html","collections/order-statuses","notifications","views/order-stats","collections/order-stats","views/order-total","backgridPaginator","backgridFilter","backgrid","dateRangePicker"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=Backgrid.ActionCell.extend({editRoute:_.template("order/edit/{{ id }}"),printObject:"order"}),d=Backgrid.Cell.extend({template:_.template("<img id='statusImage' src='{{imageUrl}}' />"),render:function(){return this.$el.html(this.template(this.model.get("status"))),this}}),v=Backgrid.Cell.extend({template:_.template("{{lastName}}, {{firstName}}"),render:function(){return this.$el.html(this.template(this.model.get("contact"))),this}}),m=Backbone.View.extend({template:_.template(i),emptyTemplate:_.template(u),startDate:null,endDate:null,cachedOrderStatuses:null,orderStatus:null,number:null,filterRoute:_.template("orders/from/{{ start }}/to/{{ end }}"),filterStatusRange:_.template("orders/status/{{ status }}/from/{{ start }}/to/{{ end }}"),initialize:function(e){_.bindAll(this,"rangeChanged","searchNumber","changeStatus","addStatus"),e.startDate&&(this.startDate=e.startDate),e.endDate&&(this.endDate=e.endDate),e.orderStatus&&(this.orderStatus=e.orderStatus),e.number&&(this.number=e.number),this.cachedOrderStatuses=new a,this.cachedOrderStatuses.reset(CachedStatuses),this.on("change:range",this.rangeChanged),this.render()},events:{"click #btnLastOrders":"showLastOrders","click #searchNumber":"searchNumber","change #searchStatus":"changeStatus"},rangeChanged:function(e){e.start===null&&e.end===null&&Backbone.history.navigate("orders/newest",{trigger:!0});var t=this.$("#searchStatus").val();t?(e.status=t,Backbone.history.navigate(this.filterStatusRange(e),{trigger:!0})):Backbone.history.navigate(this.filterRoute(e),{trigger:!0})},showLastOrders:function(){Backbone.history.navigate("orders/newest",{trigger:!0})},searchNumber:function(){var e=this.$("#fieldNumber").val();e&&Backbone.history.navigate("orders/number/"+e,{trigger:!0})},changeStatus:function(){var e=this.$("#searchStatus").val();if(e)if(this.startDate&&this.endDate){var t={};t.start=this.startDate.toString("yyyy-MM-dd"),t.end=this.endDate.toString("yyyy-MM-dd"),t.status=e,Backbone.history.navigate(this.filterStatusRange(t),{trigger:!0})}else Backbone.history.navigate("orders/status/"+e,{trigger:!0});else if(this.startDate&&this.endDate){var t={};t.start=this.startDate.toString("yyyy-MM-dd"),t.end=this.endDate.toString("yyyy-MM-dd"),Backbone.history.navigate(this.filterRoute(t),{trigger:!0})}else Backbone.history.navigate("orders/newest",{trigger:!0})},addStatuses:function(){this.cachedOrderStatuses.each(this.addStatus)},addStatus:function(e){var t=e.get("label")==""?r.get("selectOrderStatus"):e.get("label");e.get("value")==this.orderStatus?this.$("#searchStatus").append("<option selected='selected' value='"+e.get("value")+"'>"+t+"</option>"):this.$("#searchStatus").append("<option value='"+e.get("value")+"'>"+t+"</option>")},render:function(){this.$el.html(this.template(r.toJSON())),this.addStatuses(),new l({collection:new c(null,{collection:this.collection}),el:this.$("#ordersStats")}),new h({el:this.$("#ordersStatsTotal")});var e=[{name:"",cell:p,editable:!1},{name:"statusId",label:"Status",editable:!1,cell:d},{name:"number",label:"Number",editable:!1,cell:Backgrid.IntegerCell.extend({className:""})},{name:"contact",label:"Customer",editable:!1,sortable:!1,cell:v},{name:"orderDate",label:"Date",editable:!1,cell:"string"},{name:"total",label:"Total",editable:!1,cell:Backgrid.NumberCell.extend({className:""}),decimals:2}],t=new Backgrid.Grid({className:"backgrid table table-striped table-condensed table-hover",columns:e,collection:this.collection,emptyText:r.get("emptyResult")});t.header.row.cells[4].direction("descending"),this.$("#orders").html(t.render().$el);var n=new Backgrid.Extension.Paginator({collection:this.collection});this.$("#orders").append(n.render().$el);var i=this,s={};return s[r.get("today")]=["today","today"],s[r.get("yesterday")]=["yesterday","yesterday"],s[r.get("lastSevenDays")]=[Date.today().add({days:-6}),"today"],s[r.get("lastThirtyDays")]=[Date.today().add({days:-29}),"today"],s[r.get("thisMonth")]=[Date.today().moveToFirstDayOfMonth(),Date.today().moveToLastDayOfMonth()],s[r.get("lastMonth")]=[Date.today().moveToFirstDayOfMonth().add({months:-1}),Date.today().moveToFirstDayOfMonth().add({days:-1})],this.$("#form-date-range").daterangepicker({ranges:s,opens:"left",format:Date.CultureInfo.formatPatterns.shortDate,separator:" to ",startDate:Date.today().add({days:-29}),endDate:Date.today(),maxDate:Date.today(),locale:{applyLabel:r.get("rangeApplyLabel"),fromLabel:r.get("rangeFromLabel"),toLabel:r.get("rangeToLabel"),customRangeLabel:r.get("rangeLabel"),firstDay:1},showWeekNumbers:!0,buttonClasses:["btn-danger"]},function(e,t){i.startDate=e==null?null:e.toString("yyyy-MM-dd"),i.endDate=t==null?t:t.toString("yyyy-MM-dd"),i.trigger("change:range",{start:i.startDate,end:i.endDate})}),this.startDate==null||this.endDate==null?this.$("#form-date-range span").html(r.get("noRange")):this.$("#form-date-range span").html(this.startDate.toString(Date.CultureInfo.formatPatterns.shortDate)+" - "+this.endDate.toString(Date.CultureInfo.formatPatterns.shortDate)),this.number==null?this.$("#fieldNumber").val(""):this.$("#fieldNumber").val(this.number),this}});return m}),define("text!templates/order-edit.html",[],function(){return'<div class="row-fluid">\n	<div class="widget widget-tabs widget-tabs-left">\n		<div class="widget-title">\n			<span class="tools" id="statusContainer"></span>\n		</div>\n		<div class="widget-body">\n			<div class="form-horizontal">\n				<div class="tabbable portlet-tabs">\n					<ul class="nav nav-tabs">\n						<li class="active"><a href="#order_data" data-toggle="tab"><i class="icon-info-sign"></i>&nbsp;{{tabEditOrder}}</a></li>\n					</ul>\n					<div class="tab-content" >\n						<div class="tab-pane fade in active" id="order_data">\n\n							<table id="orderItems" border="0" cellpadding="0" cellspacing="0" width="100%" class="mvn-order-items">\n								<thead>\n									<tr>\n										<th class="items">{{itemsOrdered}}</th>\n										<th>{{quantity}}</th>\n										<th>{{itemPrice}}</th>\n										<th>{{itemTotal}}</th>\n									</tr>\n								</thead>\n								<tfoot>\n									<tr>\n										<td>\n											<label for="description">{{notes}}</label>\n											<textarea id="description" cols="30" rows="5"></textarea>\n										</td>\n										<td class="item-total" colspan="3">\n											<p>{{subtotal}}: <span id="subtotal"></span></p>\n											<p>{{discount}}: <span id="discountAmount"><br><em id="promotion-desc">Test</em></span></p>\n											<p>{{shipping}}: <span id="shippingAmount"><br><em id="shippingMethod"></em></span></p>\n											<p class="total">{{total}}: <span id="total"></span></p>\n										</td>\n									</tr>\n								</tfoot>\n								<tbody>\n\n								</tbody>\n							</table>\n\n							<!--<table border="0" cellpadding="0" cellspacing="0" width="100%" class="mvn-order-manage">\n								<thead>\n									<tr>\n										<th colspan="2">Manage Order</th>\n									</tr>\n								</thead>\n								<tfoot>\n									<tr>\n										<td><button type="button" id="add-product" class="button button-primary add_product">Send Shipment Notice</button></td>\n										<td style="text-align:right;">\n											<button type="button" id="add-product" class="button button-primary add_product">Capture</button>\n											<button type="button" id="add-product" class="button button-primary add_product">Void</button>\n											<button type="button" id="add-product" class="button button-primary add_product">Refund</button>\n										</td>\n									</tr>\n								</tfoot>\n								<tbody>\n									<tr>\n										<td class="message"><strong>Payment Pending</strong> - Transaction: 136583</td>\n										<td>Submitted on Friday, May 3th 2013 at 11:53pm EST (1 day ago)</td>\n									</tr>\n									<tr>\n										<td class="message"><strong style="color:#007a3b;">Payment Receive</strong> - Transaction: 136583</td>\n										<td>Submitted on Friday, May 3th 2013 at 11:53pm EST (1 day ago)</td>\n									</tr>\n								</tbody>\n							</table>-->\n\n							<div class="colgroup">\n								<div id=\'contactContainer\' class="col-3 billto">\n\n								</div>\n								<div id=\'billingContainer\' class="col-3 shipto">\n\n								</div>\n								<div id=\'shippingContainer\' class="col-3 information">\n\n								</div>\n								<div style="clear:both"></div>\n							</div>\n							\n							<div class="colgroup"  id="extraGroupsContainer">\n								<div id="creditCardContainer" class="col-3 billto">\n									\n								</div>\n								<!--<div id="orderShipping" class="col-3 shipto">									\n								</div>-->\n								\n								<!--<div style="clear:both"></div>-->\n							</div>\n							<table  id="orderStatuses" border="0" cellpadding="0" cellspacing="0" width="100%" class="mvn-order-events">\n								<thead>\n									<tr>\n										<th colspan="4">{{orderEvents}}</th>\n									</tr>\n								</thead>\n								<!--<tfoot>\n									<tr>\n										<td colspan="4" style="text-align:right"><strong>Order Balance:</strong> <span><strong>$0.00</strong></span></td>\n									</tr>\n								</tfoot>-->\n								<tbody>\n\n								</tbody>\n								<!--<tfoot>\n									<tr>\n										\n										<th><button id="addStatus" class="btn btn-mini btn-primary"><i class="icon-plus-sign"></i>&nbsp;{{buttonAddStatus}}</button></th>\n										<th></th>\n										<th style="text-align:left">Aca va el estado</th>\n										<th style="text-align:left">Descripcion</th>\n									</tr>\n								</tfoot>-->\n							</table>\n						</div>	\n					</div>\n				</div>\n				<div class="form-actions">\n					<button class="btn btn-success" id="save"><i class="icon-save"></i>&nbsp;{{buttonSaveOrder}}</button>\n					<button class="btn" id="cancel"><i class="icon-remove"></i>&nbsp;{{buttonCancelEditOrder}}</button>\n					<a class=\'btn btn-primary\' id=\'print\' target="_blank"><i class=\'icon-print\'></i>&nbsp;Print</a> \n				</div>\n			</div>\n		</div>\n\n	</div>\n\n</div>\n'}),define("text!templates/address.html",[],function(){return'<span id="firstLine"></span><br>\n<span id="secondLine"></span><br>\n<span id="city"></span>&nbsp;<span id="state"></span>&nbsp;<span id="zipcode"></span><br>\n<span id="country"></span>\n'}),define("models/address",[],function(){var e=Backbone.Model.extend({defaults:{},initialize:function(){},validation:{}});return e}),define("views/address",["jquery","localization","notifications","spinner","text!templates/address.html","models/address"],function(e,t,n,r,i,s){return Backbone.View.extend({template:_.template(i),model:s,initialize:function(e){this.model.id||r.stop(),this.render()},events:{},bindings:{"#firstLine":{observe:"firstLine",onGet:function(e){return e?e:""}},"#secondLine":{observe:"secondLine",onGet:function(e){return e?e:""}},"#city":{observe:"city",onGet:function(e){return e?e+",":""}},"#state":{observe:"state",onGet:function(e){return e?e:""}},"#country":{observe:"country",onGet:function(e){return e?e:""}},"#zipcode":{observe:"zipcode",onGet:function(e){return e?e:""}}},render:function(){return e(this.el).html(this.template(t.toJSON())),this.stickit(),this}})}),define("models/extra-field",[],function(){var e=Backbone.Model.extend({defaults:{},initialize:function(){},validation:{}});return e}),define("collections/extra-fields",["models/extra-field"],function(e){var t=Backbone.Collection.extend({model:e,initialize:function(){}});return t}),define("text!templates/extra-field-row.html",[],function(){return'<dt id="label"></dt>\n<dd id="value"></dd>\n'}),define("views/extra-field-row",["jquery","localization","text!templates/extra-field-row.html"],function(e,t,n){var r=Backbone.View.extend({tagName:"div",template:_.template(n),collection:null,events:{},bindings:{"#label":"label","#value":"value"},initialize:function(e){},render:function(){return e(this.el).append(this.template(t.toJSON())),this.stickit(),e(this.el)}});return r}),define("models/order-item",[],function(){var e=Backbone.Model.extend({defaults:{},initialize:function(){},validation:{}});return e}),define("collections/order-items",["models/order-item"],function(e){var t=Backbone.Collection.extend({model:e,initialize:function(){}});return t}),define("text!templates/order-item-row.html",[],function(){return'<td class="items"><strong><span id="name"></span></strong></td>\n<td id="quantity"></td>\n<td id="price"></td>\n<td id="item-total"></td>\n\n\n'}),define("views/order-item-row",["jquery","localization","text!templates/order-item-row.html"],function(e,t,n){var r=Backbone.View.extend({tagName:"tr",template:_.template(n),quantity:0,price:0,bindings:{"#name":{observe:"name",updateMethod:"html"},"#quantity":{observe:"quantity",onGet:function(e,t){return this.quantity=e,e}},"#price":{observe:"price",updateMethod:"html",onGet:function(e,t){return this.price=e,"$&nbsp;"+parseFloat(e).toFixed(2)}}},initialize:function(e){},render:function(){e(this.el).append(this.template(t.toJSON())),this.stickit();var n=this.price*this.quantity;return this.$("#item-total").html("$&nbsp;"+parseFloat(n).toFixed(2)),e(this.el)}});return r}),define("text!templates/order-status-row.html",[],function(){return'<td><img id="statusImage" /></td>\n<td id="timestamp"></td>\n<td id="name"></td>\n<td id="statusDescription"></td>\n'}),define("views/order-status-row",["jquery","localization","text!templates/order-status-row.html"],function(e,t,n){var r=Backbone.View.extend({tagName:"tr",template:_.template(n),bindings:{"#name":{observe:"name",updateMethod:"html"},"#timestamp":{observe:"timestamp",onGet:function(e,t){return e}},"#statusImage":{attributes:[{name:"src",observe:"imageUrl",onGet:function(e,t){return e?e:""}},{name:"alt",observe:"name",onGet:function(e,n){return e?e:t.get("unknownStatus")}}]},"#statusDescription":"statusDescription"},initialize:function(e){},render:function(){return e(this.el).append(this.template(t.toJSON())),this.stickit(),e(this.el)}});return r}),define("models/promotion",["dateJS"],function(){var e=Backbone.Model.extend({defaults:{enabled:!0,exclusive:!1},initialize:function(){},parse:function(e){return e.from!=undefined&&e.from.length>0&&e.from!="0000-00-00"?e.from=Date.parse(e.from).toString("yyyy-MM-dd"):e.from=null,e.to!=undefined&&e.to.length>0&&e.to!="0000-00-00"?e.to=Date.parse(e.to).toString("yyyy-MM-dd"):e.to=null,e},validation:{section:{required:!0},name:{required:!0},code:{required:!0},type:{required:!0},value:{required:!0,pattern:"number"},enabled:{required:!0},exclusive:{required:!0}}});return e}),define("collections/promotions",["models/promotion"],function(e){var t=Backbone.Collection.extend({model:e,initialize:function(){}});return t}),define("text!templates/contact.html",[],function(){return'<div class="head-title">Titulo</div>\n<div class="right">\n	<img class="image-size" id="contactImage" src="" alt="">\n</div>\n<div class="left">\n	<p><strong id="contactName"></strong></p>\n	<p><em id="contactPhone"></em></p>\n	<p><em id="contactEmail"></em></p>\n	<p><em id="contactCompany"></em></p>\n	<p id="addressContainer">		\n	</p>\n</div>\n'}),define("models/contact",[],function(){var e=Backbone.Model.extend({defaults:{},initialize:function(){},validation:{}});return e}),define("collections/addresses",["models/address"],function(e){var t=Backbone.Collection.extend({model:e,initialize:function(){}});return t}),define("views/contact",["jquery","localization","notifications","spinner","text!templates/contact.html","models/contact","models/address","collections/addresses","views/address"],function(e,t,n,r,i,s,o,u,a){return Backbone.View.extend({template:_.template(i),model:s,addressView:null,title:"",initialize:function(e){this.model=new s,this.model.set(e.data),this.title=e.title,this.model.id||r.stop(),this.render()},events:{},bindings:{"#contactName":{observe:["salutation","firstName","lastName"],updateMethod:"html",onGet:function(e,t){var n="";return e[0]&&(n+=e[0]+"&nbsp;"),n+e[1]+"&nbsp;"+e[2]}},"#contactEmail":"email","#contactCompany":"company","#contactPhone":"phone"},replaceImage:function(e){this.$("#contactImage").attr("src",e)},render:function(){e(this.el).html(this.template(t.toJSON())),this.stickit(),this.$(".head-title").html(this.title),this.model.get("profileImageUrl")?this.replaceImage(this.model.get("profileImageUrl")):this.replaceImage(Maven.noPhotoUrl);var n=new u;return n.reset(this.model.get("addresses")),n.length>0&&(this.addressView=new a({model:n.first(),el:this.$("#addressContainer")})),this}})}),define("text!templates/credit-card.html",[],function(){return'<div class="head-title"></div>\n<div class="left">\n	<p id="emptyCreditCardContainer"><strong id="emptyCreditCard"></strong></p>\n	<p><strong id="holderName"></strong></p>\n	<p><em id="type"></em></p>\n	<p><em id="date"></em></p>\n</div>'}),define("models/credit-card",[],function(){var e=Backbone.Model.extend({defaults:{},initialize:function(){},validation:{}});return e}),define("views/credit-card",["jquery","localization","notifications","spinner","text!templates/credit-card.html","models/credit-card"],function(e,t,n,r,i,s){return Backbone.View.extend({template:_.template(i),model:s,title:"",initialize:function(e){this.model=new s,this.model.set(e.data),this.title=e.title,this.model.id||r.stop(),this.render()},events:{},bindings:{"#holderName":"holderName","#type":{observe:["type","number"],onGet:function(e){return e[0]+" XXXX-XXXX-XXXX-"+e[1]}},"#number":"number","#date":{observe:["month","year"],onGet:function(e){return"Expiration "+e[0]+"/"+e[1]}}},render:function(){return e(this.el).html(this.template(t.toJSON())),this.$(".head-title").html(this.title),this.model.get("number")!=""?(this.$("#emptyCreditCardContainer").empty(),this.stickit()):this.$("#emptyCreditCard").html(t.get("emptyCreditCard")),this}})}),define("text!templates/extra-field-group.html",[],function(){return'<!--<div class="col-3">-->\n	<div class="head-title"></div>\n	<dl id="extraFieldsContainer">\n\n	</dl>\n<!--</div>-->\n'}),define("views/extra-field-group",["jquery","localization","notifications","spinner","collections/extra-fields","text!templates/extra-field-group.html","views/extra-field-row"],function(e,t,n,r,i,s,o){return Backbone.View.extend({template:_.template(s),title:null,className:"col-3",position:0,initialize:function(e){this.title=e.title,this.position=e.position,this.collection=new i,this.collection.reset(e.collection),this.render()},events:{},render:function(){return e(this.el).html(this.template(t.toJSON())),this.position%3==0&&e(this.el).addClass("shipto"),this.$(".head-title").html(this.title),this.addExtraFields(),e(this.el)},addExtraField:function(e){var t=new o({model:e});this.$("#extraFieldsContainer").append(t.render())},addExtraFields:function(){this.collection.each(this.addExtraField)}})}),define("text!templates/order-status-title.html",[],function(){return'<span id="transaction">{{transactionId}}: <strong><span id="transactionId"></span></strong> &nbsp;|&nbsp; </span> \n<strong>{{ columnStatus }}: <span id="name"></span></strong> <img id="statusImage" name="statusImage" />\n'}),define("views/order-status-title",["jquery","localization","models/order-status","text!templates/order-status-title.html"],function(e,t,n,r){var i=Backbone.View.extend({tagName:"span",className:"tools",template:_.template(r),transaction:null,bindings:{"#name":{observe:"name",updateMethod:"html"},"#statusImage":{attributes:[{name:"src",observe:"imageUrl",onGet:function(e,t){return e?e:""}},{name:"alt",observe:"name",onGet:function(e,n){return e?e:t.get("unknownStatus")}}]}},initialize:function(e){this.model=new n,this.model.set(e.data),this.transaction=e.transaction},render:function(){return e(this.el).append(this.template(t.toJSON())),this.stickit(),this.transaction?this.$("#transactionId").append(this.transaction):this.$("#transaction").remove(),e(this.el)}});return i}),define("text!templates/order-ship.html",[],function(){return'<div class="head-title">{{orderShipping}}</div>\n<div class="left" id="info">\n	<p><strong id="shippingCarrierLabel"></strong></p>\n	<p><a id="shippingTrackingUrlLink" target="_blank" href="" ><em id="shippingTrackingCodeLabel"></em></a></p>	\n</div>\n<div class="left" id="fields">\n	<p class="control-group">\n		<input class="input-large" type="text" name="shippingCarrier" id="shippingCarrier" placeholder="{{carrier}}" data-error-style="tooltip"/>\n	</p>\n	<p class="control-group">\n		<input class="input-large" type="text" name="shippingTrackingCode" id="shippingTrackingCode" placeholder="{{trackingCode}}" data-error-style="tooltip"/>\n	</p>\n	<p class="control-group">\n		<input class="input-large" type="text" name="shippingTrackingUrl" id="shippingTrackingUrl" placeholder="{{trackingUrl}}" data-error-style="tooltip"/>\n	</p>\n	<div class="alert alert-info">This will change the order status to "Shipped" and will send a notification to the customer</div>\n	<p style="text-align: right">\n		<button class="btn btn-mini btn-success" id="btnSendShipmentNotice"><i class="icon-truck"></i>&nbsp;{{sendShipmentNotice}}</button>\n		<button class="btn btn-mini" id="btnCancelShipmentNotice">{{cancelShipmentNotice}}</button>\n	</p>\n</div>\n<div class="left" id="action">\n	<button id="btnAddShipmentNotice" class="btn btn-mini"><i class="icon-truck"></i>&nbsp;{{addShipmentNotice}}</button>\n</div>'}),define("views/order-ship",["jquery","localization","notifications","spinner","text!templates/order-ship.html"],function(e,t,n,r,i){return Backbone.View.extend({template:_.template(i),className:"col-3",position:0,parentView:null,prevCarrier:"",prevCode:"",prevUrl:"",initialize:function(e){_.bindAll(this,"showFields","cancelSend","sendNotice"),this.position=e.position,this.parentView=e.parentView,this.prevCarrier=this.model.get("shippingCarrier"),this.prevCode=this.model.get("shippingTrackingCode"),this.prevUrl=this.model.get("shippingTrackingUrl")},events:{"click #btnAddShipmentNotice":"showFields","click #btnCancelShipmentNotice":"cancelSend","click #btnSendShipmentNotice":"sendNotice"},bindings:{"#shippingCarrier":"shippingCarrier","#shippingTrackingCode":"shippingTrackingCode","#shippingTrackingUrl":"shippingTrackingUrl","#shippingCarrierLabel":"shippingCarrier","#shippingTrackingCodeLabel":"shippingTrackingCode","#shippingTrackingUrlLink":{attributes:[{name:"href",observe:"shippingTrackingUrl"}]}},manageView:function(e){e?(this.$("#info").hide(),this.$("#action").hide(),this.$("#fields").show()):(this.model.get("statusId")==ShippedStatusId?this.$("#info").show():this.$("#info").hide(),this.$("#action").show(),this.$("#fields").hide())},restoreFields:function(){this.model.set("shippingCarrier",this.prevCarrier),this.model.set("shippingTrackingCode",this.prevCode),this.model.set("shippingTrackingUrl",this.prevUrl)},showFields:function(){this.model.set("validateShipping",!0),this.manageView(!0)},cancelSend:function(){this.restoreFields(),this.model.set("validateShipping",!1),this.manageView(!1)},sendNotice:function(){this.model.set("sendNotice",!0),this.parentView.saveOrder()},render:function(){return e(this.el).html(this.template(t.toJSON())),this.position%3==0&&e(this.el).addClass("shipto"),this.stickit(),this.manageView(!1),e(this.el)}})}),define("views/order-edit",["jquery","localization","notifications","spinner","text!templates/order-edit.html","views/address","collections/extra-fields","views/extra-field-row","collections/order-items","views/order-item-row","collections/order-statuses","views/order-status-row","collections/promotions","views/contact","views/credit-card","views/extra-field-group","views/order-status-title","views/order-ship","wysihtml5","datePicker"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){return Backbone.View.extend({template:_.template(i),extraFieldsCollection:null,itemsCollection:null,statusesCollection:null,contactView:null,shippingContactView:null,billingContactView:null,creditCardView:null,orderStatusTitleView:null,orderShipView:null,extraFieldsView:null,groupCount:0,addStatus:!1,initialize:function(e){_.bindAll(this,"saveOrder","cancelOrder","addExtraFields","addItems","addStatuses"),this.extraFieldsCollection=new o,this.extraFieldsCollection.on("reset",this.addExtraFields),this.itemsCollection=new a,this.itemsCollection.on("reset",this.addItems),this.statusesCollection=new l,this.statusesCollection.on("reset",this.addStatuses)},events:{"click #save":"saveOrder","click #cancel":"cancelOrder"},bindings:{"#number":{observe:"number",onGet:function(e){return e?" # "+e:""}},"#description":"description","#orderDate":{observe:"orderDate",onGet:function(e){return Date.parse(e).toString(Date.CultureInfo.formatPatterns.shortDate)},onSet:function(e){return Date.parse(e).toString("yyyy-MM-dd")}},"#subtotal":{observe:"subtotal",updateMethod:"html",onGet:function(e,t){return"$&nbsp;"+parseFloat(e).toFixed(2)}},"#total":{observe:"total",updateMethod:"html",onGet:function(e,t){return"$&nbsp;"+parseFloat(e).toFixed(2)}},"#shippingAmount":{observe:["shippingAmount","shippingMethod"],updateMethod:"html",onGet:function(e,t){var n="$&nbsp;"+parseFloat(e[0]).toFixed(2);return e[1]&&e[1].name&&(n+="<br><em>"+e[1].name+"</em>"),n}},"#discountAmount":{observe:["discountAmount"],updateMethod:"html",onGet:function(e,t){var n=new h;n.reset(this.model.get("promotions"));var r="";return n.each(function(e){r.length==0?r+=e.get("name"):r+="<br/>"+e.get("name")}),"$&nbsp;"+parseFloat(-e[0]).toFixed(2)+"<br><em>"+r+"</em>"}},"#contactName":{observe:["contactSalutation","contactFirstName","contactLastName"],updateMethod:"html",onGet:function(e,t){var n="";return e[0]&&(n+=e[0]+"&nbsp;"),n+e[1]+"&nbsp;"+e[2]}},"#contactEmail":"contactEmail","#contactCompany":"contactCompany","#contactPhone":"contactPhone","#print":{attributes:[{name:"href",observe:"id",onGet:function(e,t){return e?Maven.printUrl+"order/"+e:""}}]}},render:function(){e(this.el).html(this.template(t.toJSON())),this.$("#nav a").click(function(t){t.preventDefault(),e(this).tab("show")}),this.stickit(),Backbone.Validation.bind(this,{forceUpdate:!0}),this.contactView=new p({title:t.get("contact"),data:this.model.get("contact")}),this.contactView.setElement(this.$("#contactContainer")).render(),this.billingContactView=new p({title:t.get("billingContact"),data:this.model.get("billingContact")}),this.billingContactView.setElement(this.$("#billingContainer")).render(),this.shippingContactView=new p({title:t.get("shippingContact"),data:this.model.get("shippingContact")}),this.shippingContactView.setElement(this.$("#shippingContainer")).render(),this.creditCardView=new d({title:t.get("creditCard"),data:this.model.get("creditCard")}),this.creditCardView.setElement(this.$("#creditCardContainer")).render(),this.orderStatusTitleView=new m({data:this.model.get("status"),transaction:this.model.get("transactionId")}),this.orderStatusTitleView.setElement(this.$("#statusContainer")).render(),this.orderShipView=new g({model:this.model,position:this.groupCount,parentView:this}),this.$("#extraGroupsContainer").append(this.orderShipView.render()),this.groupCount+=1,this.extraFieldsCollection.reset(this.model.get("extraFields"));var n=this.extraFieldsCollection.groupBy(function(e){return e.get("group")});return this.addExtraFieldGroups(n),this.$("#extraGroupsContainer").append('<div style="clear:both">'),this.itemsCollection.reset(this.model.get("items")),this.statusesCollection.reset(this.model.get("statusHistory")),this.model.id||r.stop(),this},addExtraField:function(e){var t=new u({model:e});this.$("#extraFieldsContainer").append(t.render())},addExtraFields:function(){this.extraFieldsCollection.length>0?this.extraFieldsCollection.each(this.addExtraField,this):this.$("#emptyExtraInformation").html(t.get("emptyExtraInformation"))},addExtraFieldGroup:function(e,t){var n=new v({collection:e,title:t,position:this.groupCount});this.$("#extraGroupsContainer").append(n.render()),this.groupCount+=1},addExtraFieldGroups:function(e){_.each(e,this.addExtraFieldGroup,this)},addItem:function(e){var t=new f({model:e});this.$("#orderItems > tbody").append(t.render())},addItems:function(){this.itemsCollection.each(this.addItem,this)},addStatusFn:function(e){var t=new c({model:e});this.$("#orderStatuses > tbody").append(t.render())},addStatuses:function(){this.statusesCollection.each(this.addStatusFn,this)},saveOrder:function(){var e=this.$("#description").val();this.model.set("description",e),this.model.isValid(!0)?this.model.save(null,{success:function(){Backbone.history.navigate("",{trigger:!0})},failure:function(e){n.showError(t.get("saveError"))}}):n.showError(t.get("saveError"))},cancelOrder:function(){Backbone.history.navigate("",{trigger:!0})}})}),define("router",["require","jquery","models/order","collections/orders","views/orders","notifications","spinner","views/order-edit"],function(e){var t=e("jquery"),n=e("models/order"),r=e("collections/orders"),i=e("views/orders"),s=e("notifications"),o=e("spinner"),u=e("views/order-edit"),a={filter:{start:null,end:null,newest:null,status:CompletedStatusId,number:null}};return Backbone.Router.extend({ordersView:null,routes:{"order/edit/:id":"editOrder","orders/newest":"newestOrders","orders/number/:number":"ordersByNumber","orders/status/:status":"ordersByStatus","orders/status/:status/from/:start/to/:end":"ordersByStatusRange","orders/from/:start/to/:end":"defaultRoute","*path":"defaultRoute"},initialize:function(e){this.el=e.el,this.orders=new r},setTitle:function(e){e?t(".page-title").html("Order #"+e):t(".page-title").html("Orders")},deleteParams:function(){delete this.orders.queryParams.newest,delete this.orders.queryParams.status,delete this.orders.queryParams.number,delete this.orders.queryParams.start,delete this.orders.queryParams.end},newestOrders:function(){this.setTitle(),a.filter.start=null,a.filter.end=null,a.filter.newest=!0,a.filter.status=null,a.filter.number=null;var e=this;this.deleteParams(),this.orders.queryParams.newest=!0,this.orders.fetch({success:function(n){t(e.el).html((new i({collection:n,startDate:null,endDate:null})).el)},error:function(e){s.showError(e),o.stop()}})},ordersByStatus:function(e){this.setTitle(),a.filter.start=null,a.filter.end=null,a.filter.newest=!1,a.filter.status=e,a.filter.number=null;var n=this;this.deleteParams(),this.orders.queryParams.status=e,this.orders.fetch({success:function(e){t(n.el).html((new i({collection:e,startDate:null,endDate:null,number:null,orderStatus:a.filter.status})).el)},error:function(e){s.showError(e),o.stop()}})},ordersByNumber:function(e){this.setTitle(),a.filter.start=null,a.filter.end=null,a.filter.newest=!1,a.filter.status=null,a.filter.number=e;var n=this;this.deleteParams(),this.orders.queryParams.number=e,this.orders.fetch({success:function(e){t(n.el).html((new i({collection:e,startDate:null,endDate:null,number:a.filter.number,orderStatus:null})).el)},error:function(e){s.showError(e),o.stop()}})},ordersByStatusRange:function(e,n,r){this.setTitle(),a.filter.start=n,a.filter.end=r,a.filter.newest=!1,a.filter.status=e,a.filter.number=null;var u=this;this.deleteParams(),this.orders.queryParams.status=e,this.orders.queryParams.start=n,this.orders.queryParams.end=r,this.orders.fetch({success:function(e){t(u.el).html((new i({collection:e,startDate:Date.parse(a.filter.start),endDate:Date.parse(a.filter.end),number:null,orderStatus:a.filter.status})).el)},error:function(e){s.showError(e),o.stop()}})},defaultRoute:function(e,n){this.setTitle();if(!e||!n){if(a.filter.newest){Backbone.history.navigate("orders/newest",{trigger:!0});return}if(a.filter.start&&a.filter.end){a.filter.status!=undefined?Backbone.history.navigate("orders/status/"+a.filter.status+"/from/"+a.filter.start+"/to/"+a.filter.end,{trigger:!0}):Backbone.history.navigate("orders/from/"+a.filter.start+"/to/"+a.filter.end,{trigger:!0});return}if(a.filter.status!=undefined){Backbone.history.navigate("orders/status/"+a.filter.status,{trigger:!0});return}if(a.filter.number!=undefined){Backbone.history.navigate("orders/number/"+a.filter.number,{trigger:!0});return}}a.filter.start=e,a.filter.end=n,a.filter.newest=!1,a.filter.status=null,a.filter.number=null;var r=this;this.deleteParams(),this.orders.queryParams.start=a.filter.start,this.orders.queryParams.end=a.filter.end,this.orders.fetch({success:function(e){t(r.el).html((new i({collection:e,startDate:Date.parse(a.filter.start),endDate:Date.parse(a.filter.end),number:null,orderStatus:null})).el)},failure:function(e){s.showError(e),o.stop()}})},editOrder:function(e){var r=this,i=new n({id:e});i.fetch({success:function(e){r.setTitle(e.get("number"));var n=new u({model:e});t(r.el).html(n.render().el)},failure:function(e){s.showError(e),o.stop()}})}})}),define("app",["require","router"],function(e){var t=e("router");return function(e){new t({el:e}),Backbone.history.start()}}),require(["domReady","app","jquery"],function(e,t,n){e(function(){var e=new t("#mainContainer")})}),define("main",function(){});