/**
 * @license RequireJS text 2.0.5+ Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("models/profile",[],function(){var e=Backbone.Model.extend({action:"profileEntryPoint",defaults:{statusImageUrl:""},initialize:function(){},validation:{email:{pattern:"email",required:!0},zip:{pattern:"number",required:!1}}});return e}),define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a=typeof location!="undefined"&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||undefined),h=[],p=e.config&&e.config()||{};t={version:"2.0.5+",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(h.hasOwnProperty(n)){var s=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(p.env==="node"||!p.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(p.env==="xhr"||!p.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(p.env==="rhino"||!p.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(p.env==="xpconnect"||!p.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}};return t}),define("text!templates/profiles.html",[],function(){return'<div class="row-fluid">\n	<div class="widget">\n		<div class="widget-title">\n			<h4><i class="icon-reorder"></i>\n				{{ title }}</h4>\n			<span class="tools">\n				<a href="javascript:void(0)" class="filter active"><i class="icon-cog"></i></a>\n				<button class="btn btn-success" id="add"><i class="icon-plus"></i>&nbsp;{{ buttonAdd }}</button>\n			</span>\n		</div>\n		<div class="filter-wrap">\n			<input id="fieldEmail" name="fieldEmail" type="text" class="input-medium" placeholder="{{columnEmail}}" style="margin: 0 auto;"  />&nbsp;\n			<input id="fieldFirstName" name="fieldFirstName" type="text" class="input-medium" placeholder="{{columnFirstName}}" style="margin: 0 auto;"  />&nbsp;\n			<input id="fieldLastName" name="fieldLastName" type="text" class="input-medium" placeholder="{{columnLastName}}" style="margin: 0 auto;"  />&nbsp;\n			<span id="search" class="btn"><i class="icon-search"></i></span>&nbsp;\n			<span id="cleanSearch" class="btn"><i class="icon-undo"></i></span>			\n		</div>\n		<div class="widget-body">\n			<div id="profiles-container"></div>\n		</div>\n	</div>\n</div>\n\n\n'}),define("collections/profiles",["models/profile","pageable"],function(e){var t=Backbone.MavenCollection.extend({model:e,action:"profileEntryPoint",initialize:function(){}});return t}),define("text!templates/profile-row.html",[],function(){return'<td><img id="statusImage" /></td>\n<td id="email"></td>\n<td id="firstName"></td>\n<td id="lastName"></td>\n<td>\n	<button class="btn btn-primary btn-mini" id="edit">\n	<i class="icon-edit"></i>&nbsp;{{ buttonEdit }}</button>\n	<a id="confirmDeleteButton" class="btn btn-mini" role="button"><i class="icon-trash"></i>&nbsp;{{ buttonDelete }}</a>\n	<div aria-hidden="true" aria-labelledby="myModalLabel3" role="dialog" \n	     tabindex="-1" class="modal fade" id="confirmDeleteModal" style="display: none;">\n		<div class="modal-header">\n			<button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>\n			<h3 id="myModalLabel3">{{ deleteConfirmationMessage }}</h3>\n		</div>\n		<div class="modal-body">\n			<p><strong>{{ columnEmail }}:&nbsp;</strong><span id="email"></span></p>\n			<p><strong>{{ columnFirstName }}:&nbsp;</strong><span id="firstName"></span></p>\n			<p><strong>{{ columnLastName }}:&nbsp;</strong><span id="lastName"></span></p>\n			<div class="alert alert-block alert-error fade in">\n				<!--<button data-dismiss="alert" class="close" type="button">×</button>-->\n				<h4 class="alert-heading">{{deleteWarning}}</h4>\n				<p>\n					{{deleteWarningMessage}}\n				</p>\n			</div>\n		</div>\n		<div class="modal-footer">\n			<button aria-hidden="true" data-dismiss="modal" class="btn">{{ buttonCloseModal }}</button>\n			<button class="btn btn-danger" id="performDelete" data-dismiss="modal">{{ buttonConfirmDelete }}</button>\n		</div>\n	</div>\n</td>\n'}),define("views/profile-row",["jquery","localization","notifications","text!templates/profile-row.html"],function(e,t,n,r){var i=Backbone.View.extend({template:_.template(r),editRoute:_.template("profile/edit/{{ id }}"),events:{"click button[id=edit]":"edit","click a[id=confirmDeleteButton]":"showDelete","click button[id=performDelete]":"del"},bindings:{"#email":"email","#firstName":"firstName","#lastName":"lastName","#statusImage":{attributes:[{name:"src",observe:"statusImageUrl",onGet:function(e,t){return e?e:""}},{name:"alt",observe:"userId",onGet:function(e,t){return e?"Has wordpress user!":"Dont have wordpress user"}}]}},render:function(){return this.$el.html(this.template(t.toJSON())),this.delegateEvents(),this.stickit(),this},showDelete:function(){this.$("#confirmDeleteModal").modal()},destroy_view:function(){e(this.el).toggleClass("error");var t=this;e(this.el).fadeOut("slow",function(){t.undelegateEvents(),t.$el.removeData().unbind(),t.remove(),Backbone.View.prototype.remove.call(t)})},edit:function(){Backbone.history.navigate(this.editRoute(this.model.toJSON()),{trigger:!0})},del:function(){var e=this;this.model.destroy({success:function(){n.showDelete(t.get("deleted")),e.destroy_view()}})}});return i}),define("text!templates/empty.html",[],function(){return'<img class="img-no-profiles" />\n<span>{{ message }}</span>\n'}),define("views/profiles",["jquery","dataTables","spinner","localization","text!templates/profiles.html","collections/profiles","views/profile-row","text!templates/empty.html","backgridPaginator","backgridFilter","backgrid"],function(e,t,n,r,i,s,o,u){var a=Backgrid.ActionCell.extend({editRoute:_.template("profile/edit/{{ id }}")}),f=Backgrid.Cell.extend({template:_.template("<img id='statusImage' src='{{statusImageUrl}}' />"),render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),l=Backbone.View.extend({template:_.template(i),paginator:null,emptyTemplate:_.template(u),email:null,firstName:null,lastName:null,events:{"click #add":"addNew","click #search":"search","click #cleanSearch":"removeSearch"},initialize:function(e){_.bindAll(this,"addNew","search","removeSearch"),this.collection=e.profiles;var t=this;this.email=e.email,this.firstName=e.firstName,this.lastName=e.lastName,this.collection.fetch({success:function(e,n){t.render()},error:function(e,t){}})},addNew:function(){Backbone.history.navigate("profile/new",{trigger:!0})},loadFilter:function(){this.email&&this.$("#fieldEmail").val(this.email),this.firstName&&this.$("#fieldFirstName").val(this.firstName),this.lastName&&this.$("#fieldLastName").val(this.lastName)},removeSearch:function(){Backbone.history.navigate("profiles",{trigger:!0})},search:function(){var e="",t=this.$("#fieldEmail").val();t&&(e+="/email/"+t);var n=this.$("#fieldFirstName").val();n&&(e+="/fname/"+n);var r=this.$("#fieldLastName").val();r&&(e+="/lname/"+r),Backbone.history.navigate("profiles"+e,{trigger:!0})},render:function(){this.$el.html(this.template(r.toJSON()));var e=[{name:"",cell:a},{name:"user_id",label:"Status",editable:!1,cell:f},{name:"email",label:"Email",editable:!1,cell:"string"},{name:"firstName",label:"First Name",editable:!1,cell:"string"},{name:"lastName",label:"Last Name",editable:!1,cell:"string"},{name:"createdOn",label:"Creation Date",editable:!1,cell:Backgrid.MavenDateTimeCell},{name:"lastUpdate",label:"Last Update",editable:!1,cell:Backgrid.MavenDateTimeCell}],t=new Backgrid.Grid({className:"backgrid table table-striped table-condensed table-hover",columns:e,collection:this.collection,emptyText:r.get("emptyResult")});this.$("#profiles-container").html(t.render().$el);var i=new Backgrid.Extension.Paginator({collection:this.collection});return this.$("#profiles-container").append(i.render().$el),this.loadFilter(),n.stop(),this}});return l}),define("text!templates/profile-edit.html",[],function(){return'<div class="row-fluid">\n	<div class="widget widget-tabs widget-tabs-left">\n		<div class="widget-title">\n			<span class="tools"></span>\n		</div>\n		<div class="widget-body">\n			<div class="form-horizontal">\n				<div class="tabbable portlet-tabs">\n					<ul class="nav nav-tabs">\n						<li class="active"><a href="#attendee_data" data-toggle="tab"><i class="icon-user-md"></i>&nbsp;{{tabEditPersonalInfo}}</a></li>\n						<li><a href="#attendee_photo" data-toggle="tab"><i class="icon-camera"></i>&nbsp;{{tabEditPhoto}}</a></li>\n						<li><a href="#attendee_address_container" data-toggle="tab"><i class="icon-home"></i>&nbsp;{{tabEditAddress}}</a></li>\n						<li><a href="#user" data-toggle="tab"><i class="icon-key"></i>&nbsp;{{tabEditUser}}</a></li>\n						<li id="rolesTab"><a href="#roles" data-toggle="tab"><i class="icon-group"></i>&nbsp;{{tabEditRoles}}</a></li>\n					</ul>\n					<div class="tab-content" >\n						<div class="tab-pane fade in active" id="attendee_data">\n							<div  class="control-group">\n								<label class="control-label" for="salutation">{{salutation}}:</label>\n								<div class="controls"><select class="input-small" name="salutation" id="salutation"></select></div>\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="firstName">{{firstName}}:</label>\n								<div class="controls"><input class="input-xlarge" type="text" name="firstName" id="firstName" data-error-style="inline"/></div>\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="lastName">{{lastName}}:</label>\n								<div class="controls"><input class="input-xlarge" type="text" name="lastName" id="lastName" data-error-style="inline"/></div>\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="email">{{email}}:</label>\n								<div class="controls">\n									<div class="input-prepend">\n										<span class="add-on">@</span>\n										<input class="input-large" type="text" name="email" id="email"/></div>\n								</div>\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="phone">{{phone}}:</label>\n								<div class="controls"><input class="input-large" type="text" name="phone" id="phone"/></div>\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="company">{{company}}:</label>\n								<div class="controls"><input class="input-xlarge" type="text" name="company" id="company" data-error-style="inline"/></div>\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="notes">{{notes}}:</label>\n								<div class="controls"><textarea class="input-xxlarge" name="notes" id="notes"></textarea></div>\n							</div>\n							<div class="control-group">\n								<label class="control-label" for="wholesale">{{wholesale}}:</label>\n								<div class="controls">\n									<div class="toggle-button profile-toggle-button">\n										<input type="checkbox" class="toggle" name="wholesale" id="wholesale"/></div>\n								</div>\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="adminNotes">{{adminNotes}}:</label>\n								<div class="controls"><textarea class="input-xxlarge" name="adminNotes" id="adminNotes"></textarea></div>\n							</div>\n							<div class="control-group">\n								<label class="control-label" for="createdOn">{{createdOn}}:</label>\n								<div class="controls">\n									<input class="input-medium" disabled="disabled" type="text" name="createdOn" id="createdOn" data-error-style="inline"/>\n								</div>\n							</div>\n							<div class="control-group">\n								<label class="control-label" for="lastUpdate">{{lastUpdate}}:</label>\n								<div class="controls">\n									<input class="input-medium" disabled="disabled" type="text" name="lastUpdate" id="lastUpdate" data-error-style="inline"/>\n								</div>\n							</div>\n						</div>	\n						<div class="tab-pane fade in" id="attendee_photo">\n							<div  class="control-group">\n								<label class="control-label" >{{photo}}:</label>\n								<div class="controls input-icon">\n									<img src=\'\' class=\'preview upload_image_button\' />\n									<span class="input-info tooltips" data-original-title="{{ photo }}">\n										<i class="icon-exclamation-sign"></i>\n									</span>\n\n								</div>\n							</div>\n						</div>\n						<div class="tab-pane fade in" id="attendee_address_container">\n							<div class="alert alert-success" id="add_address_container">\n								<div  class="control-group">\n									<label class="control-label" for="typeAddressAdd">{{type}}:</label>\n									<div class="controls">\n										<select class="input-small" name="typeAddressAdd" id="typeAddressAdd"></select>\n										<span class="help-inline">\n											<button class="btn btn-mini btn-success" id="addAddress"><i class="icon-plus-sign"></i>&nbsp;{{buttonAddAddress}}</button>\n										</span>\n									</div>									\n								</div>\n							</div>\n							<div id="attendee_address" class="accordion in collapse" style="height: auto;">\n							</div>\n\n						</div>\n						<div class="tab-pane fade in" id="user">\n							<div class="alert alert-info">\n								<!--<button data-dismiss="alert" class="close">×</button>-->\n								A WordPress user means, that the user will be able to log in to your system.<br />\n								It will be associated with the <strong>"<span id="defaultRole"></span>"</strong> role. 								\n							</div>\n							<div id="registeredMessage" class="control-group">\n								<label class="control-label"></label>\n								<div class="controls">{{registeredMessage}}</div>\n							</div>\n							<div id="registeredControl" class="control-group">\n								<label class="control-label" for="registered">{{registered}}:</label>\n								<div class="controls">\n									<div class="toggle-button profile-toggle-button">\n										<input type="checkbox" class="toggle" name="registered" id="registered"/></div>\n								</div>\n\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="username">{{username}}:</label>\n								<div class="controls"><input class="input-xlarge" type="text" name="username" id="username" /></div>\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="password">{{password}}:</label>\n								<div class="controls"><input class="input-large" type="password" name="password" id="password" /></div>\n							</div>\n							<div  class="control-group">\n								<label class="control-label" for="confirm">{{confirm}}:</label>\n								<div class="controls"><input class="input-large" type="password" name="confirm" id="confirm" /></div>\n							</div>\n						</div>\n						<div class="tab-pane fade in" id="roles">\n							<div class="alert alert-info" id="roles_message">\n								<!--<button data-dismiss="alert" class="close">×</button>-->\n								The profile need to be asociated with a Worpress User to asign roles. 								\n							</div>\n							<div id="roles_container"></div>\n						</div>\n					</div>\n				</div>\n				<div class="form-actions">\n					<button class="btn btn-success" id="save"><i class="icon-save"></i>&nbsp;{{buttonSave}}</button>\n					<button class="btn" id="cancel"><i class="icon-remove"></i>&nbsp;{{buttonCancelEdit}}</button>\n				</div>\n			</div>\n		</div>\n\n	</div>\n\n</div>\n'}),define("models/address",[],function(){var e=Backbone.Model.extend({defaults:{type:DefaultAddressType,primary:!1},initialize:function(){},validation:{type:{required:!0},name:{required:!1},description:{required:!1},firstLine:{required:!1},secondLine:{required:!1},neighborhood:{required:!1},city:{required:!1},state:{required:!1},country:{required:!1},zipcode:{required:!1}}});return e}),define("collections/addresses",["models/address"],function(e){var t=Backbone.Collection.extend({model:e,initialize:function(){this.on("change:primary",this.changePrimary)},changePrimary:function(e,t,n){t&&this.each(function(t){t!==e&&t.set("primary",!1)},e)}});return t}),define("text!templates/address-edit.html",[],function(){return'<div class="accordion-heading">\n	<span style="float: right;padding: 6px 6px 0 0;">\n		<button class="btn btn-danger btn-mini" id="delete"><i class="icon-remove-circle"></i>&nbsp;{{ buttonDelete }}</button>\n	</span>\n	<a href="#collapse_1" data-parent="#attendee_address" data-toggle="collapse" class="accordion-toggle collapsed">\n		<i class="icon-home"></i>\n		<strong><span id="title"></span></strong><span id="title-first-line"></span><span id="title-city"></span><span id="title-state"></span><span id="title-country"></span><span id="title-primary"></span>\n	</a>\n\n</div>\n<div class="accordion-body collapse"  style="height: 0px;">\n	<div class="accordion-inner">\n		<div  class="control-group">\n			<label class="control-label" for="type">{{type}}:</label>\n			<div class="controls"><select class="input-xlarge"  name="type" id="type" ></select></div>\n		</div>\n		<div class="control-group">\n			<label class="control-label" for="primary">{{primary}}:</label>\n			<div class="controls">\n				<div class="toggle-button address-toggle-button">\n					<input type="checkbox" class="toggle" name="primary" id="primary"/></div>\n				<span class="help-inline">{{primaryHelp}}</span>\n			</div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="name">{{name}}:</label>\n			<div class="controls"><input class="input-xlarge" type="text" name="name" id="name" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="description">{{description}}:</label>\n			<div class="controls"><input class="input-xlarge" type="text" name="description" id="description" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="firstLine">{{address}}:</label>\n			<div class="controls"><input class="input-xlarge" type="text" name="firstLine" id="firstLine" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="secondLine">{{address2}}:</label>\n			<div class="controls"><input class="input-xlarge" type="text" name="secondLine" id="secondLine" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="neighborhood">{{neighborhood}}:</label>\n			<div class="controls"><input class="input-xlarge" type="text" name="neighborhood" id="neighborhood" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="city">{{city}}:</label>\n			<div class="controls"><input class="input-large" type="text" name="city" id="city" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="state">{{state}}:</label>\n			<div class="controls"><input class="input-large" type="text" name="state" id="state" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="country">{{country}}:</label>\n			<div class="controls"><select class="input-xlarge" name="country" id="country"></select></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="zipcode">{{zipcode}}:</label>\n			<div class="controls"><input class="input-large" type="text" name="zipcode" id="zipcode" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="notes">{{notes}}:</label>\n			<div class="controls"><input class="input-large" type="text" name="notes" id="notes" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="addressPhone">{{phone}}:</label>\n			<div class="controls"><input class="input-large" type="text" name="addressPhone" id="addressPhone" /></div>\n		</div>\n		<div  class="control-group">\n			<label class="control-label" for="phoneAlternative">{{phoneAlternative}}:</label>\n			<div class="controls"><input class="input-large" type="text" name="phoneAlternative" id="phoneAlternative" /></div>\n		</div>\n	</div>\n</div>\n\n'}),define("views/address-edit",["jquery","localization","notifications","spinner","text!templates/address-edit.html","toggleButtons","wysihtml5","select2"],function(e,t,n,r,i){return Backbone.View.extend({template:_.template(i),tagName:"div",className:"accordion-group",collection:null,tempId:null,optionsTemplate:_.template("<option value={{value}}>{{name}}</option>"),initialize:function(e){this.model.id||r.stop(),this.collection=e.collection},renderOptions:function(){var e=this;_.each(CachedCountries,function(t){e.$("#country").append(e.optionsTemplate(t))},e)},events:{"change #country":"setCountry","click button[id=delete]":"deleteAddress"},deleteAddress:function(){this.collection.remove(this.model),this.destroy_view()},destroy_view:function(){var t=this;e(this.el).fadeOut("slow",function(){t.undelegateEvents(),t.$el.removeData().unbind(),t.remove(),Backbone.View.prototype.remove.call(t)})},bindings:{".accordion-toggle":{attributes:[{name:"href",observe:"id",onGet:function(e,t){return e?"#acc_"+e:"#acc_"+this.cid}}]},".accordion-body":{attributes:[{name:"id",observe:"id",onGet:function(e,t){return e?"acc_"+e:"acc_"+this.cid}}]},"#title":{observe:"type",onGet:function(e){return AddressesTypes[e]}},"#title-first-line":{observe:"firstLine",onGet:function(e){return e?" - "+e:""}},"#title-city":{observe:"city",onGet:function(e){return e?" - "+e:""}},"#title-state":{observe:"state",onGet:function(e){return e?" - "+e:""}},"#title-country":{observe:"country",onGet:function(e){return e?" - "+e:""}},"#title-primary":{observe:"primary",onGet:function(e){return e?" ("+t.get("primary")+")":""}},"#type":{observe:"type",selectOptions:{collection:function(){var e=[];for(var t in AddressesTypes)e.push({id:t,data:{name:AddressesTypes[t]}});return e},labelPath:"data.name",valuePath:"id"}},"#name":"name","#primary":"primary","#description":"description","#firstLine":"firstLine","#secondLine":"secondLine","#neighborhood":"neighborhood","#city":"city","#state":"state","#zipcode":"zipcode","#notes":"notes","#addressPhone":"phone","#phoneAlternative":"phoneAlternative","#adminNotes":"adminNotes","#primary":"primary"},setCountry:function(){this.model.set("country",this.$("#country").val())},getSelectedCountry:function(){return this.$("#country").val()},format:function(e){if(!e.id)return e.text;var t=e.id.toLowerCase();return e.id=="*"&&(t="all"),"<img class='flag' src='"+Maven.imagesPath+"flags_small/"+t+".png'/>&nbsp;&nbsp;"+e.text},render:function(){var n=this;this.$el.html(this.template(t.toJSON())),this.$("#nav a").click(function(t){t.preventDefault(),e(this).tab("show")}),this.renderOptions(),this.stickit(),Backbone.Validation.bind(this,{forceUpdate:!0}),this.$(".toggle-button.address-toggle-button").toggleButtons({width:100,label:{enabled:t.get("yes"),disabled:t.get("no")}}),this.$("#country").select2({allowClear:!0,formatResult:n.format,formatSelection:n.format,escapeMarkup:function(e){return e}});var r=this.model.get("country");return CachedCountries[r]&&this.$("#country").select2("val",r),this}})}),define("models/role",[],function(){var e=Backbone.Model.extend({defaults:{selected:!1},initialize:function(){},validation:{name:{required:!0}}});return e}),define("collections/roles",["models/role"],function(e){var t=Backbone.Collection.extend({model:e,initialize:function(){}});return t}),define("text!templates/role.html",[],function(){return'<label class="control-label" for="status"><span id="rolename" name="rolename"></span>:</label>\n<div class="controls">\n	<div class="toggle-button role-toggle-button">\n		<input type="checkbox" class="toggle" name="status" id="status"/></div>\n</div>'}),define("views/roles",["jquery","localization","notifications","spinner","text!templates/role.html","toggleButtons","wysihtml5","select2"],function(e,t,n,r,i){return Backbone.View.extend({template:_.template(i),tagName:"div",className:"control-group",userRoles:null,initialize:function(e){this.model.id||r.stop(),this.userRoles=e.collection;var t=this.userRoles.find(function(e){return e.get("id")==this.get("id")},this.model);t&&this.model.set("selected",!0)},events:{"change #status":"changeStatus"},bindings:{"#rolename":"name","#status":"selected"},changeStatus:function(){this.$("#status").is(":checked")?this.userRoles.add(this.model):this.userRoles.remove(this.model)},render:function(){return this.$el.html(this.template(t.toJSON())),this.stickit(),Backbone.Validation.bind(this,{forceUpdate:!0}),this.$(".toggle-button.role-toggle-button").toggleButtons({width:100,label:{enabled:t.get("yes"),disabled:t.get("no")}}),this}})}),define("views/profile-edit",["jquery","localization","notifications","spinner","text!templates/profile-edit.html","models/address","collections/addresses","views/address-edit","collections/roles","views/roles","wpuploader","toggleButtons","wysihtml5"],function(e,t,n,r,i,s,o,u,a,f,l){return Backbone.View.extend({template:_.template(i),addresses:null,roles:null,userRoles:null,useOneAddress:!1,initialize:function(e){_.bindAll(this,"save","cancel","showUploader","addOne","addNew","addRole","changeRegistered"),this.model.id||r.stop(),this.addresses=new o,this.addresses.on("add",this.addOne),this.addresses.reset(this.model.get("addresses")),this.roles=new a,this.roles.on("add",this.addRole),this.roles.reset(CachedRoles),this.userRoles=new a,this.userRoles.reset(this.model.get("roles")),this.render()},events:{"click #save":"save","click #cancel":"cancel","click .upload_image_button":"showUploader","click #addAddress":"addNew","change #registered":"changeRegistered"},addTypes:function(){for(var e in AddressesTypes)this.$("#typeAddressAdd").append("<option value="+e+">"+AddressesTypes[e]+"</option>")},addOne:function(e){var t=new u({model:e,collection:this.addresses});this.$("#attendee_address").append(t.render().el)},addAll:function(){this.addresses.each(this.addOne)},addRoles:function(){this.roles.each(this.addRole)},addRole:function(e){var t=new f({model:e,collection:this.userRoles});this.$("#roles_container").append(t.render().el)},addNew:function(){var e=this.$("#typeAddressAdd").val(),t=this.addresses.findWhere({type:e});if(t)n.showError("There is already a "+AddressesTypes[e]+" address.");else{var r=new s;r.set("type",e),this.addresses.add(r)}},changeRegistered:function(){this.$("#registered").is(":checked")?(this.$("#roles_message").hide(),this.$("#roles_container").show()):(this.$("#roles_message").show(),this.$("#roles_container").hide())},bindings:{"#salutation":{observe:"salutation",selectOptions:{collection:function(){return[null,{id:1,data:{name:"Dr."}},{id:2,data:{name:"Mr."}},{id:3,data:{name:"Mrs."}},{id:4,data:{name:"Ms."}}]},labelPath:"data.name",valuePath:"data.name"}},"#firstName":"firstName","#lastName":"lastName","#email":"email","#phone":"phone","#company":"company","#notes":"notes","#wholesale":"wholesale","#adminNotes":"adminNotes","#createdOn":"createdOn","#lastUpdate":"lastUpdate","#registeredControl":{observe:"userId",updateView:!1,visible:function(e){return e?!(e>0):!0}},"#registeredMessage":{observe:"userId",updateView:!1,visible:function(e){return e?e>0:!1}},"#username":{attributes:[{name:"value",observe:"userName",onGet:function(e){return e?e:this.model.get("email")}},{name:"readonly",observe:"userId",onGet:function(e){return e&&e>0?"readonly":""}}]},"#roles_message":{observe:"userId",updateView:!1,visible:function(e){return e?e==0:!1}},"#roles_container":{observe:"userId",updateView:!1,visible:function(e){return e?e>0:!1}}},render:function(){return e(this.el).html(this.template(t.toJSON())),this.addTypes(),this.addAll(),this.addRoles(),this.$("#nav a").click(function(t){t.preventDefault(),e(this).tab("show")}),this.$("#address_nav a").click(function(t){t.preventDefault(),e(this).tab("show")}),this.$("#defaultRole").text(DefaultRole),this.stickit(),Backbone.Validation.bind(this,{forceUpdate:!0}),this.$(".toggle-button.profile-toggle-button").toggleButtons({width:100,label:{enabled:t.get("yes"),disabled:t.get("no")}}),this.model.get("profileImageUrl")?this.replaceImage(this.model.get("profileImageUrl")):this.replaceImage(Maven.noPhotoUrl),this},replaceImage:function(e){this.$(".preview").attr("src",e)},showUploader:function(){var e=this;l.show(function(t){e.model.set("profileImage",t.id),e.replaceImage(t.url)})},save:function(e){e.preventDefault();var r=this.$("#password").val(),i=this.$("#confirm").val(),s=r===i;this.model.set("password",r),this.model.set("confirm",i),this.model.set("username",this.$("#username").val()),this.model.set("registered",this.$("#registered").is(":checked")),this.model.set("addresses",this.addresses.toJSON()),this.model.set("roles",this.userRoles.toJSON());var o=this.model.isValid(!0),u=!0;this.addresses.each(function(e){var t=e.isValid(!0);return u=u&&t,!0}),o&&u&&s?this.model.save(null,{success:function(){Backbone.history.navigate("",{trigger:!0})},failure:function(e){n.showError(t.get("saveError"))}}):s?u?n.showError(t.get("saveError")):n.showError("There was an error in one of the address."):n.showError("Passwords doesn't match.")},cancel:function(){Backbone.history.navigate("",{trigger:!0})}})}),define("router",["require","jquery","models/profile","views/profiles","notifications","spinner","collections/profiles","views/profile-edit"],function(e){var t=e("jquery"),n=e("models/profile"),r=e("views/profiles"),i=e("notifications"),s=e("spinner"),o=e("collections/profiles"),u=e("views/profile-edit"),a={filter:{email:null,firstName:null,lastName:null}};return Backbone.Router.extend({attendeesView:null,routes:{"profile/new":"newObject","profile/edit/:id":"editObject","profiles/:field/:value":"filterSingle","profiles/:field1/:value1/:field2/:value2":"filterDouble","profiles/:field1/:value1/:field2/:value2/:field3/:value3":"filterTriple",profiles:"noFilter","*path":"defaultRoute"},initialize:function(e){this.el=e.el,this.profiles=new o},noFilter:function(){this.setParams(null,null,null),this.defaultRoute()},filterSingle:function(e,t){switch(e){case"email":this.setParams(t,null,null);break;case"fname":this.setParams(null,t,null);break;case"lname":this.setParams(null,null,t);break;default:this.setParams(null,null,null)}this.defaultRoute()},filterDouble:function(e,t,n,r){var i,s,o;switch(e){case"email":i=t;break;case"fname":s=t;break;case"lname":o=t}switch(n){case"email":i=r;break;case"fname":s=r;break;case"lname":o=r}this.setParams(i,s,o),this.defaultRoute()},filterTriple:function(e,t,n,r,i,s){var o,u,a;switch(e){case"email":o=t;break;case"fname":u=t;break;case"lname":a=t}switch(n){case"email":o=r;break;case"fname":u=r;break;case"lname":a=r}switch(i){case"email":o=s;break;case"fname":u=s;break;case"lname":a=s}this.setParams(o,u,a),this.defaultRoute()},setParams:function(e,t,n){this.deleteParams(),a.filter.email=e,a.filter.firstName=t,a.filter.lastName=n},deleteParams:function(){delete this.profiles.queryParams.email,delete this.profiles.queryParams.firstName,delete this.profiles.queryParams.lastName},defaultRoute:function(){a.filter.email&&(this.profiles.queryParams.email=a.filter.email),a.filter.firstName&&(this.profiles.queryParams.firstName=a.filter.firstName),a.filter.lastName&&(this.profiles.queryParams.lastName=a.filter.lastName),this.profilesView=new r({el:this.el,profiles:this.profiles,email:a.filter.email,firstName:a.filter.firstName,lastName:a.filter.lastName})},newObject:function(){var e=new n;this.profiles.add(e),t(this.el).html((new u({model:e})).el)},editObject:function(e){var r=this,o=this.profiles.get(e);o?t(r.el).html((new u({model:o})).el):(o=new n({id:e}),o.fetch({success:function(e){t(r.el).html((new u({model:e})).el)},failure:function(e){i.showError(e),s.stop()}}))}})}),define("app",["require","router"],function(e){var t=e("router");return function(e){new t({el:e}),Backbone.history.start()}}),require(["app","jquery"],function(e,t){var n=new e("#mainContainer")}),define("main",function(){});