requirejs.config({baseUrl:Maven.requireBaseUrl,paths:{text:Maven.requireTextPluginPath,stickit:Maven.requireStickItPluginPath,i18n:Maven.requireil8nPluginPath,validation:Maven.requireBackboneValidationPluginPath,backgrid:Maven.requireBackgridPluginPath,backgridPaginator:Maven.requireBackgridPaginatorPluginPath,backgridFilter:Maven.requireBackgridFilterPluginPath,lunr:Maven.requireBackgridFilterLunrPluginPath,pageable:Maven.requireBackbonePageablePluginPath,dataTables:Maven.requireDataTablesPluginPath,toggleButtons:Maven.requireToggleButtonsPluginPath,dateJS:Maven.requireDateJSPluginPath,datePicker:Maven.requireDatePickerPluginPath,timePicker:Maven.requireTimePickerPluginPath,dateRangePicker:Maven.requireDateRangePickerPluginPath,gritter:Maven.requireGritterPluginPath,wysi:Maven.requireWysiPluginPath,wysihtml5:Maven.requireWysihtml5PluginPath,jqueryForm:Maven.requireForm,tagsInput:Maven.requireTagsInput,domReady:Maven.requireDomReady,clockface:Maven.requireClockfacePluginPath,select2:Maven.requireSelect2PluginPath,googleMaps:Maven.requireGoogleMaps},shim:{dateRangePicker:{deps:["dateJS"]},datePicker:{deps:["dateJS"]},wysihtml5:{deps:["wysi"]},backgrid:{exports:"Backgrid"},backgridPaginator:{deps:["backgrid"]},backgridFilter:{deps:["backgrid","lunr"]}}});define("jquery",[],function(){return jQuery});define("backbone",[],function(){return Backbone});define("underscore",[],function(){return _});define("wpuploader",["jquery"],function(e){var t={show:function(e){var t=this;if(this.file_frame){this.file_frame.off("select");this.file_frame.on("select",function(){attachment=t.file_frame.state().get("selection").first().toJSON();if(e)e(attachment)});this.file_frame.open();return false}this.file_frame=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:false});this.file_frame.on("select",function(){attachment=t.file_frame.state().get("selection").first().toJSON();if(e)e(attachment)});this.file_frame.open();return false}};return t});define("spinner",["jquery"],function(e){var t={initialize:function(){e(document).ajaxStart(function(){e("#loader").fadeIn()});e(document).ajaxComplete(function(){e("#loader").fadeOut()})},start:function(){e("#loader").fadeIn()},stop:function(){e("#loader").fadeOut()}};t.initialize();return t});define("notifications",["jquery"],function(e){var t={messages:[],initialize:function(){},showSuccess:function(t){if(!t)t="Your data was sucessfuly saved";var n=e.gritter.add({title:"Data updated!",text:t,image:Maven.adminImagesPath+"ok.png",sticky:false,time:"4000",class_name:"gritter-success"})},showDelete:function(t){if(!t)t="Your data was sucessfuly deleted";var n=e.gritter.add({title:"Data deleted!",text:t,image:Maven.adminImagesPath+"ok.png",sticky:false,time:"4000",class_name:"gritter-success"})},showError:function(t){if(!t)t="Your data was not saved.";var n=e.gritter.add({title:"Error!",text:t,image:Maven.adminImagesPath+"error.png",sticky:true,time:"",class_name:"gritter-error"});this.messages.push(n)},removeAll:function(t){var n=e.isFunction(t.after_close)?t.after_close:function(){};for(i in this.messages){e.gritter.remove(this.messages[i])}this.messages=[];n()}};return t});define("localization",[],function(){var e=Backbone.Model.extend({defaults:{},initialize:function(){this.clear().set(Maven.translations)},validate:function(e){}});return new e});define("bg",["jquery","localization","notifications","backgrid"],function(e,t,n){Backgrid.ActionCell=Backgrid.Cell.extend({template:_.template("<button class='btn btn-primary btn-mini' id='edit'><i class='icon-edit'></i> {{ buttonEdit }}</button>"+"<button id='confirmDeleteButton' class='btn btn-mini' role='button'><i class='icon-trash'></i> {{ buttonDelete }}</button>"+"<div aria-hidden='true' aria-labelledby='myModalLabel3' role='dialog' tabindex='-1' class='modal fade' id='confirmDeleteModal' style='display: none;'>"+"<div class='modal-header'><button aria-hidden='true' data-dismiss='modal' class='close' type='button'>×</button><h3 id='myModalLabel3'>{{ deleteConfirmationMessage }}</h3></div>"+"<div class='modal-body'>"+"<div class='alert alert-block alert-error fade in'>"+"<h4 class='alert-heading'>{{deleteWarning}}</h4><p>{{deleteWarningMessage}}</p></div></div>"+"<div class='modal-footer'>"+"<button aria-hidden='true' data-dismiss='modal' class='btn'>{{ buttonCloseModal }}</button>"+"<button class='btn btn-danger' id='performDelete' data-dismiss='modal'>{{ buttonConfirmDelete }}</button>"+"</div></div>"),events:{"click #edit":"editRow","click #confirmDeleteButton":"showDelete","click #performDelete":"del"},editRoute:_.template("edit/{{ id }}"),editRow:function(){Backbone.history.navigate(this.editRoute(this.model.toJSON()),{trigger:true})},render:function(){this.$el.html(this.template(t.toJSON()));this.delegateEvents();return this},showDelete:function(){this.$("#confirmDeleteModal").modal()},del:function(){var e=this;this.model.destroy({success:function(){n.showDelete(t.get("deleted"));e.destroy_view()}})},destroy_view:function(){e(this.el).toggleClass("error");var t=this;e(this.el).fadeOut("slow",function(){t.undelegateEvents();t.$el.removeData().unbind();Backbone.View.prototype.remove.call(t)})}});Backgrid.DeleteCell=Backgrid.Cell.extend({template:_.template("<button>Delete</button>"),events:{click:"deleteRow"},deleteRow:function(e){console.log("Hello");e.preventDefault();this.model.collection.remove(this.model)},render:function(){this.$el.html(this.template());this.delegateEvents();return this}});return Backgrid});require(["jquery","notifications","spinner","stickit","validation","gritter"],function(e,t,n){Backbone.Collection.prototype.update=function(){Backbone.sync("updateCollection",this)};Backbone.sync=function(e,r,i){switch(e){case"read":mvnAjax=new MavenAjax;mvnAjax.cache=false;mvnAjax.setVar("event","read");if(i.data)mvnAjax.setVar("data",i.data);if(r.id)mvnAjax.setVar("id",r.id);mvnAjax.onCompletion=function(e){n.stop();if(typeof e=="object"){if(!e.success){i.error(e.data)}else{i.success(e.data)}}};mvnAjax.execute(r.action);break;case"create":mvnAjax=new MavenAjax;mvnAjax.setVar("event","create");mvnAjax.setVar("data",r.toJSON());mvnAjax.onCompletion=function(e){n.stop();if(typeof e=="object"){if(!e.success){i.error(e.data);t.showError(e.data)}else{i.success(e.data);t.removeAll({after_close:function(){t.showSuccess()}})}}};mvnAjax.execute(r.action);break;case"updateCollection":mvnAjax=new MavenAjax;mvnAjax.setVar("event","updateCollection");mvnAjax.setVar("data",r.toJSON());mvnAjax.onCompletion=function(e){n.stop();if(typeof e=="object"){if(!e.success){i.error(e.data);t.showError(e.data)}else{i.success(e.data);t.removeAll({after_close:function(){t.showSuccess()}})}}};mvnAjax.execute(r.action);break;case"update":mvnAjax=new MavenAjax;mvnAjax.setVar("event","update");mvnAjax.setVar("data",r.toJSON());mvnAjax.onCompletion=function(e){n.stop();if(typeof e=="object"){if(!e.success){i.error(e.data);t.showError(e.data)}else{i.success(e.data);t.removeAll({after_close:function(){t.showSuccess()}})}}};mvnAjax.execute(r.action);break;case"delete":mvnAjax=new MavenAjax;mvnAjax.setVar("event","delete");if(r.id){mvnAjax.setVar("id",r.id);mvnAjax.onCompletion=function(e){if(typeof e=="object"){if(!e.success){i.error(e.data)}else{i.success(e.data)}}};mvnAjax.execute(r.action)}else{i.error("missing id")}break}};_.extend(Backbone.Validation.messages,Maven.errorMessages);_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};_.extend(Backbone.Validation.callbacks,{valid:function(e,t,n){var r=e.$("["+n+"="+t+"]");var i=r.parents(".control-group");i.removeClass("error");if(r.data("error-style")==="tooltip"){if(r.data("tooltip"))r.tooltip("hide")}else if(r.data("error-style")==="inline"){i.find(".help-inline.error-message").remove()}else{i.find(".help-block.error-message").remove()}},invalid:function(e,t,n,r){var i=e.$("["+r+"="+t+"]");var s=i.parents(".control-group");s.addClass("error");if(i.data("error-style")==="tooltip"){var o=i.data("tooltip-position")||"right";i.tooltip({placement:o,trigger:"manual",title:n});i.tooltip("show")}else if(i.data("error-style")==="inline"){if(s.find(".help-inline").length===0){s.find(".controls").append('<span class="help-inline error-message"></span>')}var u=s.find(".help-inline");u.text(n)}else{if(s.find(".help-block").length===0){s.find(".controls").append('<p class="help-block error-message"></p>')}var u=s.find(".help-block");u.text(n)}}});Maven.recurringEnabled=Maven.recurringEnabled==="false"?false:true;require([Maven.main],function(){})})