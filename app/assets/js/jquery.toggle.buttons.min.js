!function(e){"use strict";var t=function(e,t,n){var r=0,i=t.length;for(;r<i;r++){e=e[t[r]]=e[t[r]]||r==i-1?n:{}}};e.fn.toggleButtons=function(n){var r,i,s,o=.05,u={init:function(n){this.each(function(){var u,a,f,l,c={};r=e(this);r.addClass("toggle-button");e.each(r.data(),function(n,r){var i,s={};if(n.indexOf("togglebutton")===0){i=n.match(/[A-Z][a-z]+/g);i=e.map(i,function(e){return e.toLowerCase()});t(s,i,r);c=e.extend(true,c,s)}});f=e.extend(true,{},e.fn.toggleButtons.defaults,n,c);e(this).data("options",f);u=e("<span></span>").addClass("labelLeft").text(f.label.enabled===undefined?"ON":f.label.enabled);a=e("<span></span>").addClass("labelRight").text(f.label.disabled===undefined?"OFF ":f.label.disabled);s=r.find("input:checkbox");i=s.wrap(e("<div></div>")).parent();i.append(u);i.append(e("<label></label>").attr("for",s.attr("id")||""));i.append(a);if(s.is(":checked"))r.find(">div").css("left","0");else r.find(">div").css("left","-50%");if(f.animated){if(f.transitionspeed!==undefined)if(/^(\d*%$)/.test(f.transitionspeed))o=.05*parseInt(f.transitionspeed)/100;else o=f.transitionspeed}else o=0;e(this).data("transitionSpeed",o*1e3);f["width"]/=2;r.css("width",f.width*2).find(">div").css("width",f.width*3).find(">span, >label").css("width",f.width);r.css("height",f.height).find("span, label").css("height",f.height).filter("span").css("line-height",f.height+"px");if(s.is(":disabled"))e(this).addClass("deactivate");r.find("span").css(f.font);if(f.style.enabled===undefined){if(f.style.custom!==undefined&&f.style.custom.enabled!==undefined&&f.style.custom.enabled.background!==undefined){u.css("color",f.style.custom.enabled.color);if(f.style.custom.enabled.gradient===undefined)u.css("background",f.style.custom.enabled.background);else e.each(["-webkit-","-moz-","-o-",""],function(e,t){u.css("background-color",f.style.custom.enabled.background);u.css("background-image",t+"linear-gradient(top, "+f.style.custom.enabled.background+","+f.style.custom.enabled.gradient+")")})}}else u.addClass(f.style.enabled);if(f.style.disabled===undefined){if(f.style.custom!==undefined&&f.style.custom.disabled!==undefined&&f.style.custom.disabled.background!==undefined){a.css("color",f.style.custom.disabled.color);if(f.style.custom.disabled.gradient===undefined)a.css("background",f.style.custom.disabled.background);else e.each(["-webkit-","-moz-","-o-",""],function(e,t){a.css("background-color",f.style.custom.disabled.background);a.css("background-image",t+"linear-gradient(top, "+f.style.custom.disabled.background+","+f.style.custom.disabled.gradient+")")})}}else a.addClass(f.style.disabled);var h=function(e){e.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};u.on("click",function(t){h(e(this))});a.on("click",function(t){h(e(this))});r.find("input:checkbox").on("change",function(t,n){var r=e(this).parent(),i=e(this).is(":checked"),s=e(this).closest(".toggle-button");r.stop().animate({left:i?"0":"-50%"},s.data("transitionSpeed"));f=s.data("options");if(!n)f.onChange(r,i,t)});r.find("label").on("mousedown touchstart",function(t){l=false;t.preventDefault();t.stopImmediatePropagation();if(e(this).closest(".toggle-button").is(".deactivate"))e(this).off("click");else{e(this).on("mousemove touchmove",function(t){var n=e(this).closest(".toggle-button"),r=(t.pageX||t.originalEvent.targetTouches[0].pageX)-n.offset().left,i=r/(f.width*2)*100;l=true;t.stopImmediatePropagation();t.preventDefault();if(i<25)i=25;else if(i>75)i=75;n.find(">div").css("left",i-75+"%")});e(this).on("click touchend",function(t){var n=e(t.target),r=n.siblings("input:checkbox");t.stopImmediatePropagation();t.preventDefault();e(this).off("mouseleave");if(l)if(parseInt(e(this).parent().css("left"))<-25)r.attr("checked",false);else r.attr("checked",true);else r.attr("checked",!r.is(":checked"));r.trigger("change")});e(this).on("mouseleave",function(t){var n=e(this).siblings("input:checkbox");t.preventDefault();t.stopImmediatePropagation();e(this).off("mouseleave");e(this).trigger("mouseup");if(parseInt(e(this).parent().css("left"))<-25)n.attr("checked",false);else n.attr("checked",true);n.trigger("change")});e(this).on("mouseup",function(t){t.stopImmediatePropagation();t.preventDefault();e(this).off("mousemove")})}})});return this},toggleActivation:function(){e(this).toggleClass("deactivate")},toggleState:function(t){var n=e(this).find("input:checkbox");n.attr("checked",!n.is(":checked")).trigger("change",t)},setState:function(t,n){e(this).find("input:checkbox").attr("checked",t).trigger("change",n)},status:function(){return e(this).find("input:checkbox").is(":checked")},destroy:function(){var t=e(this).find("div"),n;t.find(":not(input:checkbox)").remove();n=t.children();n.unwrap().unwrap();n.unbind("change");return n}};if(u[n])return u[n].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof n==="object"||!n)return u.init.apply(this,arguments);else e.error("Method "+n+" does not exist!")};e.fn.toggleButtons.defaults={onChange:function(){},width:100,height:25,font:{},animated:true,transitionspeed:undefined,label:{enabled:undefined,disabled:undefined},style:{enabled:undefined,disabled:undefined,custom:{enabled:{background:undefined,gradient:undefined,color:"#FFFFFF"},disabled:{background:undefined,gradient:undefined,color:"#FFFFFF"}}}}}(jQuery)
